# amwares-web-api
## 运行
* 下载项目
* 初始化
    ```bash
        #安装依赖
        npm i
        #添加数据库
        mysql
        CREATE DATABASE amwares_web_development;
        #填充数据
        npm run seeds
        #运行程序
        npm start
    ```

## 目录
* [用户相关](#用户相关) 
    * [获取用户信息](#获取用户信息)
    * [添加用户](#添加用户)
    * [修改指定用户](#修改指定用户)
    * [修改指定用户头像](#修改指定用户头像)
    * [删除用户](#删除用户)
    * [用户登录](#用户登录)
    * [用户登出](#用户登出)

## api说明文档`所有接口需用户登录后才能调用`

### 状态码(status)说明
* 200 - 请求成功状态码
* 400 - 异常请求状态码
* 404 - 找不到请求状态码

### 用户相关

---

#### 获取用户信息

#### 请求URL:
* ```/user```

#### 请求方法:
* GET

#### 返回示例:
```json
{
    "status": 200,
    "data": [
        {
            "id": 1,
            "username": "admin",
            "avatarUrl": "/images/avatar/avatar.png"
        }
    ]
}
```

#### 返回参数说明
|  参数名   |     说明     |
|-----------|--------------|
| avatarUrl | 用户头像地址 |

---

#### 添加用户

`添加用户自动添加默认头像地址/images/avatar/avatar.png`

#### 请求URL:
* ```/user/add```

#### 请求方法:
* POST

#### 参数:
|  参数名  | 必填 |  类型  |      说明      |
|----------|------|--------|----------------|
| username | y    | string | 用户名必须唯一 |
| password | y    | string | 密码           |


#### 返回示例:
```json
{
    "status": 200,
    "data": "添加用户成功"
}
```

---

#### 修改指定用户:

#### 请求URL:
* ```/user/edit/:id```

#### 请求方法:
* POST

#### 参数:
|  参数名  | 必填 |  类型  |      说明      |
|----------|------|--------|----------------|
| id       | y    | int    | 用户id         |
| password | y    | string | 密码           |

#### 返回示例:
```json
{
    "status": 200,
    "data": "用户修改密码成功"
}
```

---

#### 修改指定用户头像:

#### 请求URL:
* ```/user/edit/avatar/:id```

#### 请求方法:
* POST

#### 参数:
|  参数名   | 必填 | 类型 |   说明   |
|-----------|------|------|----------|
| id        | y    | int  | 用户id   |
| avatarUrl | y    | file | 头像图片 |

#### 返回示例:
```json
{
    "status": 200,
    "data": "修改头像成功"
}
```

---

#### 删除用户

#### 请求URL:
* ```/user/del/:id```

#### 请求方法:
* POST

#### 参数:
| 参数名 | 必填 | 类型 |            说明           |
|--------|------|------|---------------------------|
| id     | y    | int  | 用户id 不能删除已登录用户 |

#### 返回示例:
```json
{
    "status": 200,
    "data": "删除用户成功"
}
```

---

#### 用户登录

#### 请求URL:
* ```/user/login```

#### 请求方法:
* POST

#### 参数:
|  参数名  | 必填 |  类型  |  说明  |
|----------|------|--------|--------|
| username | y    | string | 用户名 |
| password | y    | string | 密码   |

#### 返回示例:
```json
{
    "status": 200,
    "data": "登录成功"
}
```

---

#### 用户登出

#### 请求URL:
* ```/user/logout```

#### 请求方法:
* POST

#### 返回示例:
```json
{
    "status": 200,
    "data": "登出成功"
}
```

---
